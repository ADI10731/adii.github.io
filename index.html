<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DCET Universe - Panda Edition üêº</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;500;700;900&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>

    <style>
        :root {
            /* PANDA THEME (Light) */
            --bg-color: #f7f9fc;
            --glass-bg: rgba(255, 255, 255, 0.95);
            --nav-bg: rgba(255, 255, 255, 0.9);
            --text-main: #2d3436;
            --text-sec: #636e72;
            --accent: #00b894; /* Bamboo Green */
            --accent-dark: #00a884;
            --panda-black: #2d3436;
            --card-border: rgba(0,0,0,0.05);
            --shadow: 0 10px 30px rgba(0,0,0,0.05);
            --input-bg: #ffffff;
            --input-border: #dfe6e9;
            --danger: #ff7675;
            --warning: #fdcb6e;
        }

        [data-theme="dark"] {
            /* PANDA THEME (Dark Mode) */
            --bg-color: #1e1e1e; /* Soft Black */
            --glass-bg: rgba(40, 40, 40, 0.95);
            --nav-bg: rgba(40, 40, 40, 0.9);
            --text-main: #ffffff;
            --text-sec: #b2bec3;
            --accent: #55efc4; /* Neon Bamboo */
            --accent-dark: #00b894;
            --panda-black: #ffffff;
            --card-border: rgba(255,255,255,0.1);
            --shadow: 0 15px 40px rgba(0,0,0,0.6);
            --input-bg: #2d3436;
            --input-border: #636e72;
        }

        * { box-sizing: border-box; transition: background 0.3s, color 0.3s, border-color 0.3s; scroll-behavior: smooth; }

        body {
            font-family: 'Outfit', sans-serif;
            background: var(--bg-color);
            margin: 0;
            padding-bottom: 80px; 
            color: var(--text-main);
            overflow-x: hidden;
            background-image: radial-gradient(var(--accent) 1px, transparent 1px);
            background-size: 40px 40px; /* Polka dot pattern */
        }

        /* --- NAVIGATION --- */
        .navbar {
            position: fixed; top: 0; width: 100%; z-index: 1000;
            background: var(--nav-bg); backdrop-filter: blur(15px);
            border-bottom: 1px solid var(--card-border);
            padding: 12px 5%; display: flex; justify-content: space-between; align-items: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.03);
        }
        .nav-logo { display: flex; align-items: center; gap: 10px; font-weight: 900; font-size: 1.2rem; color: var(--panda-black); }
        .nav-logo span { background: var(--panda-black); color: var(--bg-color); padding: 5px 10px; border-radius: 8px; }

        .nav-links { display: flex; gap: 8px; overflow-x: auto; padding-bottom: 0; -ms-overflow-style: none; scrollbar-width: none; }
        .nav-links::-webkit-scrollbar { display: none; }
        
        .nav-item { cursor: pointer; font-weight: 700; font-size: 0.85rem; color: var(--text-sec); text-decoration: none; padding: 10px 16px; border-radius: 20px; white-space: nowrap; transition: 0.2s; border: 1px solid transparent; }
        .nav-item:hover, .nav-item.active { background: var(--panda-black); color: var(--bg-color); border-color: var(--panda-black); }
        
        .theme-btn { cursor: pointer; font-size: 1.2rem; padding: 8px; border-radius: 50%; background: var(--input-bg); margin-left: 10px; border: 1px solid var(--input-border); }

        /* Mobile Menu */
        .menu-toggle { display: none; font-size: 1.5rem; cursor: pointer; }
        @media (max-width: 1000px) {
            .nav-links { display: none; position: absolute; top: 65px; left: 0; width: 100%; background: var(--glass-bg); flex-direction: column; padding: 20px; box-shadow: var(--shadow); border-bottom: 1px solid var(--card-border); }
            .nav-links.active { display: flex; }
            .menu-toggle { display: block; }
        }

        /* --- SECTIONS --- */
        .section-container {
            max-width: 1200px; margin: 100px auto 40px; padding: 0 20px;
            display: none; animation: fadeIn 0.5s ease;
        }
        .section-container.active { display: block; }

        .card {
            background: var(--glass-bg); padding: 2.5rem; border-radius: 30px;
            border: 2px solid var(--card-border); box-shadow: var(--shadow);
            position: relative; overflow: hidden;
        }

        h1 { text-align: center; font-weight: 900; font-size: 2.2rem; margin-bottom: 5px; color: var(--panda-black); }
        .subtitle { text-align: center; font-size: 0.9rem; font-weight: 700; opacity: 0.6; margin-bottom: 30px; letter-spacing: 1px; text-transform: uppercase; }

        /* --- INPUTS --- */
        .input-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .full-width { grid-column: span 2; }
        @media (max-width: 600px) { .input-grid { grid-template-columns: 1fr; } .full-width { grid-column: span 1; } }

        label { font-size: 0.85rem; font-weight: 700; color: var(--text-sec); display: block; margin-bottom: 8px; }
        input, select {
            width: 100%; padding: 16px; border-radius: 16px; border: 2px solid var(--input-border);
            background: var(--input-bg); color: var(--text-main); font-family: 'Outfit', sans-serif; font-size: 1rem; font-weight: 600;
        }
        input:focus { outline: none; border-color: var(--accent); box-shadow: 0 0 0 4px rgba(0, 184, 148, 0.1); }

        .primary-btn {
            width: 100%; padding: 18px; border: none; border-radius: 16px;
            background: var(--panda-black); color: var(--bg-color); font-size: 1.1rem; font-weight: 800; cursor: pointer;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1); margin-top: 20px; transition: transform 0.2s;
        }
        .primary-btn:hover { transform: translateY(-3px); background: var(--accent-dark); color: white; }
        
        /* High Visibility Button for College Link */
        .glow-btn {
            background: linear-gradient(135deg, #00b894 0%, #00cec9 100%);
            color: white !important;
            box-shadow: 0 5px 15px rgba(0, 184, 148, 0.4);
            animation: pulse 2s infinite;
        }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.02); } 100% { transform: scale(1); } }

        /* --- COLLEGE PREDICTOR --- */
        .college-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 20px; }
        .branch-column { background: var(--input-bg); border-radius: 20px; padding: 20px; border: 1px solid var(--input-border); }
        .branch-head { display: flex; align-items: center; gap: 10px; font-weight: 900; font-size: 1.2rem; margin-bottom: 20px; padding-bottom: 10px; border-bottom: 2px solid rgba(0,0,0,0.05); }
        
        .clg-card { 
            background: var(--glass-bg); padding: 18px; border-radius: 16px; margin-bottom: 15px; 
            border: 1px solid var(--card-border); transition: 0.2s; position: relative;
            box-shadow: 0 4px 10px rgba(0,0,0,0.02);
        }
        .clg-card:hover { transform: translateY(-3px); border-color: var(--accent); }
        
        .prob-badge {
            position: absolute; top: 12px; right: 12px; font-size: 0.75rem; 
            font-weight: 800; padding: 4px 10px; border-radius: 20px;
        }

        /* --- COUNSELING GRID --- */
        .counseling-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 20px; }
        .doc-card {
            background: var(--input-bg); padding: 25px; border-radius: 20px; text-align: center;
            text-decoration: none; color: var(--text-main); border: 2px solid transparent; transition: 0.3s;
            display: flex; flex-direction: column; align-items: center; height: 100%;
        }
        .doc-card:hover { border-color: var(--accent); transform: translateY(-5px); background: var(--glass-bg); }
        .doc-icon { font-size: 2.2rem; margin-bottom: 15px; color: var(--accent); background: rgba(0, 184, 148, 0.1); padding: 15px; border-radius: 50%; }
        .doc-title { font-weight: 700; font-size: 1rem; margin-bottom: 5px; }

        /* --- CREATOR CARD (Stylized) --- */
        .creator-card {
            background: linear-gradient(135deg, #2d3436 0%, #000000 100%);
            color: white; padding: 3rem; border-radius: 30px; text-align: center;
            position: relative; overflow: hidden;
        }
        .creator-img {
            width: 120px; height: 120px; border-radius: 50%; background: white; margin: 0 auto 20px;
            display: flex; align-items: center; justify-content: center; font-size: 3rem;
            border: 5px solid var(--accent);
        }
        .social-links { display: flex; justify-content: center; gap: 15px; margin-top: 25px; }
        .social-btn {
            width: 50px; height: 50px; border-radius: 50%; background: rgba(255,255,255,0.1);
            display: flex; align-items: center; justify-content: center; font-size: 1.5rem;
            color: white; text-decoration: none; transition: 0.3s; border: 1px solid rgba(255,255,255,0.2);
        }
        .social-btn:hover { background: var(--accent); transform: scale(1.1) rotate(10deg); color: #000; }
        
        .bg-deco { position: absolute; font-size: 15rem; opacity: 0.05; font-weight: 900; }
        .bg-top { top: -50px; left: -50px; }
        .bg-bot { bottom: -50px; right: -50px; }

        /* --- RANK DISPLAY --- */
        #rank-display-area { display: none; text-align: center; margin-top: 30px; padding: 30px; background: var(--input-bg); border-radius: 24px; border: 2px solid var(--accent); }
        .rank-big { font-size: 4rem; font-weight: 900; color: var(--accent); margin: 10px 0; text-shadow: 2px 2px 0px rgba(0,0,0,0.1); }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body data-theme="light">

    <nav class="navbar">
        <div class="nav-logo">
            <span>üêº DCET</span> Universe
        </div>
        <div class="menu-toggle" onclick="toggleMenu()"><i class="fa-solid fa-bars"></i></div>
        <div class="nav-links" id="navLinks">
            <div class="nav-item active" onclick="showSection('predictor')">Rank Predictor</div>
            <div class="nav-item" onclick="showSection('counseling')">Counseling</div>
            <div class="nav-item" onclick="showSection('college-predictor')">College Finder</div>
            <div class="nav-item" onclick="showSection('courses')">Courses</div>
            <div class="nav-item" onclick="showSection('top50')">Top 50</div>
            <div class="nav-item" onclick="showSection('study')">Study Material</div>
            <div class="nav-item" onclick="showSection('about')">Creator üë®‚Äçüíª</div>
            <div class="nav-item" onclick="showSection('ai-help')">AI Help ü§ñ</div>
        </div>
        <div class="theme-btn" onclick="toggleTheme()"><i class="fa-solid fa-moon" id="theme-icon"></i></div>
    </nav>

    <div id="predictor" class="section-container active">
        <div class="card">
            <h1>RANK PREDICTOR</h1>
            <div class="subtitle">TRAINED BY ADITHYA üòé</div>

            <div class="input-grid">
                <div>
                    <label>Diploma CGPA</label>
                    <input type="number" id="cgpa" placeholder="e.g. 9.75" step="0.01" oninput="toPercent()">
                </div>
                <div>
                    <label>Diploma Percentage (%)</label>
                    <input type="number" id="percent" placeholder="e.g. 90.00" step="0.01" oninput="toCgpa()">
                </div>
                <div class="full-width">
                    <label>Expected DCET Marks (0-100)</label>
                    <input type="number" id="marks" placeholder="e.g. 85">
                </div>
            </div>

            <button class="primary-btn" onclick="predictRank()">CHECK MY RANK üöÄ</button>

            <div id="rank-display-area">
                <div style="font-size:0.9rem; text-transform:uppercase; letter-spacing:2px; font-weight:700; color:var(--text-sec);">Predicted Rank Range</div>
                <div class="rank-big" id="rank-val">---</div>
                <div style="font-size:1.1rem; margin-bottom:20px;">Merit Score: <b id="merit-val" style="color:var(--accent);">0.00</b></div>
                
                <button class="primary-btn glow-btn" style="width:auto; padding:12px 30px; margin:0;" onclick="goToCollegePredictor()">
                    See Eligible Colleges <i class="fa-solid fa-arrow-right"></i>
                </button>
            </div>
        </div>
    </div>

    <div id="counseling" class="section-container">
        <div class="card">
            <h1>COUNSELING HUB</h1>
            <div class="subtitle">Official Documents & Links</div>
            
            <div class="counseling-grid">
                <a href="https://www.tttacademics.com/files/pdfs/static/Draft%20seat%20matrix.pdf" target="_blank" class="doc-card">
                    <div class="doc-icon"><i class="fa-solid fa-table-cells"></i></div>
                    <div class="doc-title">Seat Matrix</div>
                    <div class="doc-desc">Draft 2025 PDF</div>
                </a>
                <a href="https://cetonline.karnataka.gov.in/keawebentry456/dcet2025/dcet_2025_result_r_english.pdf" target="_blank" class="doc-card">
                    <div class="doc-icon"><i class="fa-solid fa-chart-line"></i></div>
                    <div class="doc-title">Previous Cutoff</div>
                    <div class="doc-desc">2025 Rank List</div>
                </a>
                <a href="https://cetonline.karnataka.gov.in/keawebentry456/dcet2025/DRESSCODE_KEA_KAN_2025english.pdf" target="_blank" class="doc-card">
                    <div class="doc-icon"><i class="fa-solid fa-shirt"></i></div>
                    <div class="doc-title">Dress Code</div>
                    <div class="doc-desc">Exam Hall Rules</div>
                </a>
                <a href="https://cetonline.karnataka.gov.in/keawebentry456/dcet2025/Document_Verification_Centers_Listenglish.pdf" target="_blank" class="doc-card">
                    <div class="doc-icon"><i class="fa-solid fa-building-circle-check"></i></div>
                    <div class="doc-title">Verify Centers</div>
                    <div class="doc-desc">Document Check</div>
                </a>
                <a href="https://cetonline.karnataka.gov.in/keawebentry456/dcet2025/Bell_Timings_Diploma_2025_englishenglish.pdf" target="_blank" class="doc-card">
                    <div class="doc-icon"><i class="fa-regular fa-clock"></i></div>
                    <div class="doc-title">Bell Timings</div>
                    <div class="doc-desc">Exam Schedule</div>
                </a>
                <a href="https://www.tttacademics.com/files/pdfs/static/DCET%20Course%20Code.pdf" target="_blank" class="doc-card">
                    <div class="doc-icon"><i class="fa-solid fa-list-ol"></i></div>
                    <div class="doc-title">Course Codes</div>
                    <div class="doc-desc">For Option Entry</div>
                </a>
                <a href="https://www.tttacademics.com/files/pdfs/static/DCET%20-25%20tentative%20Fees.pdf" target="_blank" class="doc-card">
                    <div class="doc-icon"><i class="fa-solid fa-money-bill-wave"></i></div>
                    <div class="doc-title">College Fees</div>
                    <div class="doc-desc">Fee Structure</div>
                </a>
            </div>
        </div>
    </div>

    <div id="college-predictor" class="section-container">
        <div class="card">
            <h1>COLLEGE FINDER</h1>
            <div class="subtitle">With Win Probability %</div>
            
            <div style="background:var(--input-bg); padding:20px; border-radius:16px; margin-bottom:30px; text-align:center;">
                <label>Enter Your Rank</label>
                <div style="display:flex; gap:10px; max-width:400px; margin:10px auto;">
                    <input type="number" id="cp-rank" placeholder="e.g. 150">
                    <button class="primary-btn" style="margin:0; width:auto;" onclick="runCollegePredictor()">Search</button>
                </div>
            </div>

            <div class="college-grid">
                <div class="branch-column">
                    <div class="branch-head" style="color:#0984e3"><i class="fa-solid fa-code"></i> CSE / ISE</div>
                    <div id="cp-cse"></div>
                </div>
                <div class="branch-column">
                    <div class="branch-head" style="color:#e84393"><i class="fa-solid fa-brain"></i> AIML / AIDS</div>
                    <div id="cp-aiml"></div>
                </div>
                <div class="branch-column">
                    <div class="branch-head" style="color:#f1c40f"><i class="fa-solid fa-microchip"></i> E & C</div>
                    <div id="cp-ec"></div>
                </div>
            </div>
        </div>
    </div>

    <div id="about" class="section-container">
        <div class="creator-card">
            <div class="bg-deco bg-top">üêº</div>
            <div class="bg-deco bg-bot">üöÄ</div>
            
            <div class="creator-img">üë®‚Äçüíª</div>
            <h1 style="color:white; margin-bottom:5px;">Hi, I'm Adithya (Adii)</h1>
            <p style="opacity:0.8; font-size:1.1rem;">E&C Diploma Student ‚Ä¢ Karnataka</p>
            <p style="max-width:600px; margin:20px auto; line-height:1.6;">
                I‚Äôm a tech enthusiast passionate about creating tools that make learning easier. 
                I built this <b>DCET Universe</b> to help diploma students estimate ranks and find the best engineering colleges.
            </p>
            
            <h3 style="margin-top:30px;">Let's Connect!</h3>
            <div class="social-links">
                <a href="mailto:akkulkarni10730@gmail.com" class="social-btn" title="Email"><i class="fa-solid fa-envelope"></i></a>
                <a href="https://t.me/Adiitrendz" target="_blank" class="social-btn" title="Telegram"><i class="fa-brands fa-telegram"></i></a>
                <a href="https://instagram.com/thyaida" target="_blank" class="social-btn" title="Instagram"><i class="fa-brands fa-instagram"></i></a>
                <a href="https://t.me/dcet26" target="_blank" class="social-btn" title="DCET Group"><i class="fa-solid fa-users"></i></a>
            </div>
        </div>
    </div>

    <div id="ai-help" class="section-container">
        <div class="card">
            <h1>AI ASSISTANT</h1>
            <div class="subtitle">Smart Tools for Study</div>
            <div class="counseling-grid">
                <a href="https://gemini.google.com/" target="_blank" class="doc-card">
                    <div class="doc-icon" style="color:#4285F4; background:rgba(66,133,244,0.1)">‚ú®</div>
                    <div class="doc-title">Google Gemini</div>
                </a>
                <a href="https://chatgpt.com/" target="_blank" class="doc-card">
                    <div class="doc-icon" style="color:#10a37f; background:rgba(16,163,127,0.1)">üß†</div>
                    <div class="doc-title">ChatGPT</div>
                </a>
                <a href="https://www.meta.ai/" target="_blank" class="doc-card">
                    <div class="doc-icon" style="color:#0668E1; background:rgba(6,104,225,0.1)">‚ôæÔ∏è</div>
                    <div class="doc-title">Meta AI</div>
                </a>
                <a href="https://manus.ai/" target="_blank" class="doc-card">
                    <div class="doc-icon" style="color:#8e44ad; background:rgba(142,68,173,0.1)">üîÆ</div>
                    <div class="doc-title">Manus AI</div>
                </a>
                <a href="https://www.perplexity.ai/" target="_blank" class="doc-card">
                    <div class="doc-icon" style="color:#2d3436; background:rgba(0,0,0,0.1)">üîé</div>
                    <div class="doc-title">Perplexity</div>
                </a>
            </div>
        </div>
    </div>

    <div id="study" class="section-container"><div class="card"><h1>STUDY ZONE</h1><div class="subtitle">Official Syllabus</div><div class="counseling-grid"><a href="https://cetonline.karnataka.gov.in/keawebentry456/dcet2025/dcet_attachmentkannada.pdf" target="_blank" class="doc-card"><div class="doc-icon"><i class="fa-solid fa-file-pdf"></i></div><div class="doc-title">Syllabus PDF</div></a></div></div></div>
    <div id="courses" class="section-container"><div class="card"><h1>COURSES</h1><div class="subtitle">Engineering Branches</div><div class="college-grid"><div class="doc-card"><div class="doc-title">CSE</div></div><div class="doc-card"><div class="doc-title">ECE</div></div><div class="doc-card"><div class="doc-title">AIML</div></div></div></div></div>
    <div id="top50" class="section-container"><div class="card"><h1>TOP 50</h1><div class="subtitle">List of Best Colleges</div><div id="top-50-list" style="height:300px; overflow-y:auto;"></div></div></div>

<script>
    // --- APP LOGIC ---

    // 1. Navigation
    function showSection(id) {
        document.querySelectorAll('.section-container').forEach(el => el.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
        event.currentTarget.classList.add('active');
        if(window.innerWidth < 1000) document.getElementById('navLinks').classList.remove('active');
        window.scrollTo(0, 0);
    }
    function toggleMenu() { document.getElementById('navLinks').classList.toggle('active'); }
    function toggleTheme() {
        const body = document.body;
        const icon = document.getElementById('theme-icon');
        if (body.getAttribute('data-theme') === 'light') {
            body.setAttribute('data-theme', 'dark');
            icon.className = 'fa-solid fa-sun';
        } else {
            body.setAttribute('data-theme', 'light');
            icon.className = 'fa-solid fa-moon';
        }
    }

    // 2. Data
    const colleges = [
        { name: "RV College (RVCE)", cse: 54, aiml: 42, ec: 49 },
        { name: "MSRIT Bangalore", cse: 145, aiml: 245, ec: 103 },
        { name: "PES Univ (RR Campus)", cse: 255, aiml: 449, ec: 621 },
        { name: "UVCE Bangalore", cse: 137, aiml: 133, ec: 212 },
        { name: "BMSCE Basavanagudi", cse: 450, aiml: 690, ec: 110 },
        { name: "Dr. Ambedkar (AIT)", cse: 688, aiml: 1578, ec: 1243 },
        { name: "Dayananda Sagar", cse: 852, aiml: 707, ec: 954 },
        { name: "Bangalore Inst. Tech", cse: 867, aiml: 951, ec: 1276 },
        { name: "Nitte Meenakshi", cse: 1649, aiml: 1389, ec: 2371 },
        { name: "Sir MVIT", cse: 2073, aiml: 2708, ec: 5264 },
        { name: "RNSIT", cse: 1824, aiml: 2390, ec: 2239 },
        { name: "JSSATE", cse: 3619, aiml: 4134, ec: 2383 },
        { name: "CMRIT", cse: 2974, aiml: 4194, ec: 3002 },
        { name: "New Horizon", cse: 2133, aiml: 3917, ec: 2561 },
        { name: "Vidya Vikas Mysore", cse: 4828, aiml: 6000, ec: 3514 }
    ];

    const ranges = [
        { min: 91.8, label: "1 - 10", val: 10 }, { min: 90.6, label: "11 - 20", val: 20 },
        { min: 89.98, label: "21 - 30", val: 30 }, { min: 89.5, label: "31 - 40", val: 40 },
        { min: 89.1, label: "41 - 50", val: 50 }, { min: 89.0, label: "51 - 60", val: 60 },
        { min: 88.3, label: "61 - 70", val: 70 }, { min: 88.0, label: "71 - 80", val: 80 },
        { min: 87.8, label: "81 - 90", val: 90 }, { min: 87.6, label: "91 - 100", val: 100 },
        { min: 86.9, label: "100 - 125", val: 125 }, { min: 86.5, label: "126 - 150", val: 150 },
        { min: 86.2, label: "151 - 175", val: 175 }, { min: 85.5, label: "176 - 200", val: 200 },
        { min: 84.6, label: "200 - 250", val: 250 }, { min: 84.0, label: "250 - 300", val: 300 },
        { min: 82.7, label: "300 - 400", val: 400 }, { min: 81.5, label: "400 - 500", val: 500 },
        { min: 79.6, label: "500 - 750", val: 750 }, { min: 75.6, label: "1000 - 1250", val: 1250 },
        { min: 67.9, label: "1750 - 3000", val: 3000 }, { min: 0, label: "3000+", val: 5000 }
    ];

    // 3. Logic
    function toPercent() {
        let v = parseFloat(document.getElementById('cgpa').value);
        if(!isNaN(v)) document.getElementById('percent').value = ((v * 10) - 7.5).toFixed(2);
    }
    function toCgpa() {
        let v = parseFloat(document.getElementById('percent').value);
        if(!isNaN(v)) document.getElementById('cgpa').value = ((v + 7.5) / 10).toFixed(2);
    }

    function predictRank() {
        let p = parseFloat(document.getElementById('percent').value);
        let m = parseFloat(document.getElementById('marks').value);
        if(isNaN(p) || isNaN(m)) { alert("Enter Valid Data!"); return; }

        let merit = (p/2) + (m/2);
        let rankLabel = "5000+";
        let rankVal = 5000;

        for(let r of ranges) {
            if(merit >= r.min) { rankLabel = r.label; rankVal = r.val; break; }
        }

        document.getElementById('rank-val').innerText = rankLabel;
        document.getElementById('merit-val').innerText = merit.toFixed(2);
        document.getElementById('rank-display-area').style.display = 'block';
        document.getElementById('cp-rank').value = rankVal;
        
        if(rankVal <= 500) { confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } }); }
    }

    function goToCollegePredictor() {
        showSection('college-predictor');
        runCollegePredictor();
    }

    function runCollegePredictor() {
        let rank = parseInt(document.getElementById('cp-rank').value);
        if(isNaN(rank)) { alert("Enter Rank!"); return; }

        let cseH="", aimlH="", ecH="";
        colleges.forEach(c => {
            cseH += getCard(c.name, c.cse, rank);
            aimlH += getCard(c.name, c.aiml, rank);
            ecH += getCard(c.name, c.ec, rank);
        });

        document.getElementById('cp-cse').innerHTML = cseH || "<small>No safe colleges.</small>";
        document.getElementById('cp-aiml').innerHTML = aimlH || "<small>No safe colleges.</small>";
        document.getElementById('cp-ec').innerHTML = ecH || "<small>No safe colleges.</small>";
    }

    function getCard(name, cutoff, rank) {
        if(rank > cutoff * 1.5) return "";
        
        let cls = "clg-card";
        let status = "Safe";
        let color = "#00b894";
        let prob = 0;

        if(rank <= cutoff) {
             cls += " clg-safe"; status = "Safe"; color = "#00b894";
             prob = 90 + Math.round(((cutoff - rank)/cutoff) * 9); 
        } else if(rank <= cutoff * 1.15) {
             cls += " clg-mod"; status = "Borderline"; color = "#fdcb6e";
             prob = 40 + Math.round(((cutoff * 1.15 - rank)/(cutoff * 0.15)) * 20);
        } else {
             cls += " clg-amb"; status = "Ambitious"; color = "#ff7675";
             prob = Math.max(1, 20 - Math.round(((rank - cutoff * 1.15)/rank) * 100));
        }

        if(prob > 99) prob = 99;

        return `
        <div class="${cls}">
            <div class="prob-badge" style="background:${color}20; color:${color}">${prob}% Chance</div>
            <div style="font-weight:700; padding-right:60px;">${name}</div>
            <div style="display:flex; justify-content:space-between; margin-top:5px; font-size:0.8rem;">
                <span style="opacity:0.7">Cutoff: ${cutoff}</span>
                <span style="font-weight:700; color:${color}">${status}</span>
            </div>
        </div>`;
    }

    // Top 50 List Filler
    const top50 = ["RVCE", "BMSCE", "PESU", "MSRIT", "UVCE", "BIT", "DSCE", "NIE", "JSS", "PES-EC", "BMSIT", "NMIT", "RNSIT", "MVIT", "JSSATE", "BNMIT", "SIT", "NHCE", "CMRIT", "AIT", "GAT", "MVJ", "REVA", "KLE", "Sahyadri", "Canara", "SJEC", "VVCE", "MCE", "PDA", "BEC", "SDM", "Oxford", "Cambridge", "East West", "City Engg", "Dr.AIT", "Sapthagiri", "KSIT", "DBIT", "Atria", "HKBK", "Presidency", "Alliance", "Jain", "Christ", "SJBIT", "GSSS", "Bapuji", "UBDT"];
    let tList = "";
    top50.forEach((n, i) => { tList += `<div style="padding:10px; border-bottom:1px solid #eee;"><b>#${i+1}</b> ${n}</div>`; });
    document.getElementById('top-50-list').innerHTML = tList;
</script>

</body>
</html>
