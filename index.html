<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DCET 2026 Ultimate Predictor</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;500;700;900&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>

    <style>
        :root {
            /* Light Theme Variables */
            --bg-grad: linear-gradient(135deg, #a18cd1 0%, #fbc2eb 100%);
            --glass-bg: rgba(255, 255, 255, 0.85);
            --text-main: #2d3436;
            --text-sec: #636e72;
            --accent: #6c5ce7;
            --card-border: rgba(255,255,255,0.6);
            --shadow: 0 15px 35px rgba(0,0,0,0.1);
            --input-bg: #f1f2f6;
        }

        [data-theme="dark"] {
            /* Dark Theme Variables */
            --bg-grad: linear-gradient(135deg, #0f2027 0%, #203a43 50%, #2c5364 100%);
            --glass-bg: rgba(30, 39, 46, 0.85);
            --text-main: #ffffff;
            --text-sec: #b2bec3;
            --accent: #00d2d3;
            --card-border: rgba(255,255,255,0.1);
            --shadow: 0 15px 35px rgba(0,0,0,0.5);
            --input-bg: #2d3436;
        }

        * { box-sizing: border-box; transition: background 0.3s, color 0.3s; }

        body {
            font-family: 'Outfit', sans-serif;
            background: var(--bg-grad);
            margin: 0;
            min-height: 100vh;
            color: var(--text-main);
            overflow-x: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* --- PRELOADER --- */
        #preloader {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #fff; z-index: 9999;
            display: flex; justify-content: center; align-items: center;
            transition: opacity 0.5s;
        }
        .loader { width: 50px; height: 50px; border: 5px solid #ddd; border-top-color: #6c5ce7; border-radius: 50%; animation: spin 1s infinite linear; }
        @keyframes spin { to { transform: rotate(360deg); } }

        /* --- NAVBAR --- */
        .navbar {
            width: 100%; padding: 20px 40px;
            display: flex; justify-content: space-between; align-items: center;
            backdrop-filter: blur(10px); background: rgba(0,0,0,0.05);
            position: fixed; top: 0; z-index: 100;
        }
        
        .logo-area {
            display: flex; align-items: center; gap: 10px;
            font-weight: 900; font-size: 1.2rem;
        }
        .logo-img {
            width: 40px; height: 40px; border-radius: 8px;
            background: var(--accent); display: flex; align-items: center; justify-content: center; color: white;
        }

        .theme-toggle {
            cursor: pointer; font-size: 1.5rem; color: var(--text-main);
            background: rgba(255,255,255,0.2); padding: 8px 12px; border-radius: 50%;
        }

        /* --- MAIN CONTAINER --- */
        .app-container {
            margin-top: 100px;
            width: 100%; max-width: 550px;
            background: var(--glass-bg);
            backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
            padding: 2.5rem; border-radius: 24px;
            border: 1px solid var(--card-border);
            box-shadow: var(--shadow);
            animation: slideUp 0.8s cubic-bezier(0.2, 0.8, 0.2, 1);
            position: relative;
        }

        h1 {
            text-align: center; font-weight: 900; font-size: 2.2rem; margin: 0;
            background: linear-gradient(90deg, #6c5ce7, #00d2d3);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }

        .signature {
            text-align: center; margin-bottom: 25px; font-size: 0.8rem;
            font-weight: 700; letter-spacing: 1px; opacity: 0.8;
        }

        /* --- INPUTS --- */
        .input-group { margin-bottom: 20px; }
        label { font-size: 0.9rem; font-weight: 600; color: var(--text-sec); display: block; margin-bottom: 8px; }
        
        input[type="number"] {
            width: 100%; padding: 16px; border-radius: 12px; border: none;
            background: var(--input-bg); color: var(--text-main);
            font-family: 'Outfit', sans-serif; font-size: 1.1rem; font-weight: 600;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.05);
        }
        input:focus { outline: 2px solid var(--accent); background: var(--glass-bg); }

        .slider-wrapper { margin-top: 10px; }
        input[type="range"] {
            width: 100%; height: 6px; border-radius: 5px; background: #dfe6e9; outline: none; -webkit-appearance: none;
        }
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none; width: 20px; height: 20px; border-radius: 50%;
            background: var(--accent); cursor: pointer; box-shadow: 0 0 10px var(--accent);
        }

        .swap-btn {
            text-align: center; margin: -10px 0; cursor: pointer; color: var(--text-sec); font-size: 1.2rem;
        }
        .swap-btn:hover { color: var(--accent); transform: scale(1.1); }

        /* --- BUTTONS --- */
        .primary-btn {
            width: 100%; padding: 18px; border: none; border-radius: 14px;
            background: linear-gradient(135deg, #6c5ce7 0%, #a29bfe 100%);
            color: white; font-size: 1.1rem; font-weight: 800; cursor: pointer;
            box-shadow: 0 10px 20px rgba(108, 92, 231, 0.3); margin-top: 10px;
            position: relative; overflow: hidden;
        }
        .primary-btn:hover { transform: translateY(-3px); box-shadow: 0 15px 30px rgba(108, 92, 231, 0.4); }
        .primary-btn::after {
            content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent); transition: 0.5s;
        }
        .primary-btn:hover::after { left: 100%; }

        .action-row { display: flex; gap: 10px; margin-top: 20px; }
        .icon-btn {
            flex: 1; padding: 12px; border: none; border-radius: 10px;
            background: var(--input-bg); color: var(--text-main); font-weight: 600; cursor: pointer;
            display: flex; align-items: center; justify-content: center; gap: 8px;
        }
        .icon-btn:hover { background: var(--text-sec); color: white; }

        /* --- RESULTS --- */
        #rank-card {
            display: none; margin-top: 30px; text-align: center;
            background: var(--input-bg); padding: 2rem; border-radius: 20px;
            border: 2px solid var(--accent); animation: popIn 0.5s ease;
        }
        .rank-big {
            font-size: 3.5rem; font-weight: 900; margin: 10px 0;
            background: linear-gradient(45deg, var(--accent), #ff7675);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }

        /* --- COLLEGE LIST --- */
        #college-section {
            display: none; width: 100%; max-width: 1100px; margin: 40px 0;
            padding: 0 20px;
        }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
        
        .branch-col {
            background: var(--glass-bg); padding: 1.5rem; border-radius: 20px;
            border: 1px solid var(--card-border);
        }
        .branch-title { font-size: 1.2rem; font-weight: 800; margin-bottom: 15px; display: flex; align-items: center; gap: 8px; }

        .clg-item {
            background: var(--input-bg); padding: 12px; border-radius: 10px; margin-bottom: 10px;
            display: flex; justify-content: space-between; align-items: center;
            border-left: 4px solid #555;
        }
        .safe { border-left-color: #00b894; }
        .risk { border-left-color: #fdcb6e; }

        /* --- TOAST --- */
        #toast {
            visibility: hidden; min-width: 250px; background-color: #333; color: #fff;
            text-align: center; border-radius: 50px; padding: 16px; position: fixed; z-index: 1000;
            left: 50%; bottom: 30px; transform: translateX(-50%); font-size: 1rem;
        }
        #toast.show { visibility: visible; animation: fadein 0.5s, fadeout 0.5s 2.5s; }

        @keyframes slideUp { from { transform: translateY(50px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        @keyframes popIn { from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        @keyframes fadein { from {bottom: 0; opacity: 0;} to {bottom: 30px; opacity: 1;} }
        @keyframes fadeout { from {bottom: 30px; opacity: 1;} to {bottom: 0; opacity: 0;} }

    </style>
</head>
<body data-theme="light">

    <div id="preloader"><div class="loader"></div></div>

    <div id="toast">Message</div>

    <nav class="navbar">
        <div class="logo-area">
            <div class="logo-img"><i class="fa-solid fa-graduation-cap"></i></div>
            <span>DCET PREDICTOR</span>
        </div>
        <div class="theme-toggle" onclick="toggleTheme()">
            <i class="fa-solid fa-moon" id="theme-icon"></i>
        </div>
    </nav>

    <div class="app-container" id="capture-area">
        <h1>DCET 2026</h1>
        <div class="signature">TRAINED BY ADITHYA ðŸ˜Ž</div>

        <div class="input-group">
            <label>Diploma CGPA</label>
            <input type="number" id="cgpa" placeholder="e.g. 9.75" step="0.01" oninput="toPercent()">
        </div>

        <div class="swap-btn" title="Convert">â‡…</div>

        <div class="input-group">
            <label>Diploma Percentage (%)</label>
            <input type="number" id="percent" placeholder="e.g. 90.00" step="0.01" oninput="toCgpa()">
        </div>

        <div class="input-group">
            <label style="display:flex; justify-content:space-between;">
                Expected Marks 
                <span id="marks-val" style="color:var(--accent)">85</span>
            </label>
            <input type="number" id="marks" value="85" oninput="syncSlider(this.value)">
            <div class="slider-wrapper">
                <input type="range" id="marks-slider" min="0" max="100" value="85" oninput="syncInput(this.value)">
            </div>
        </div>

        <button class="primary-btn" onclick="predict()">PREDICT RANK ðŸš€</button>

        <div id="rank-card">
            <div style="font-size:0.9rem; text-transform:uppercase; letter-spacing:2px; color:var(--text-sec)">Estimated Rank</div>
            <div class="rank-big" id="rank-display">---</div>
            <div style="font-size:0.9rem; margin-bottom:15px;">Merit Score: <b id="score-display">0.00</b></div>
            
            <div class="action-row">
                <button class="icon-btn" onclick="downloadResult()"><i class="fa-solid fa-camera"></i> Save</button>
                <button class="icon-btn" onclick="shareResult()"><i class="fa-solid fa-share-nodes"></i> Share</button>
            </div>
        </div>
    </div>

    <div id="college-section">
        <div class="grid">
            <div class="branch-col">
                <div class="branch-title" style="color:#3498db"><i class="fa-solid fa-laptop-code"></i> CSE / ISE</div>
                <div id="cse-list"></div>
            </div>
            <div class="branch-col">
                <div class="branch-title" style="color:#e84393"><i class="fa-solid fa-robot"></i> AIML / AIDS</div>
                <div id="aiml-list"></div>
            </div>
            <div class="branch-col">
                <div class="branch-title" style="color:#f1c40f"><i class="fa-solid fa-microchip"></i> E & C</div>
                <div id="ec-list"></div>
            </div>
        </div>
    </div>

<script>
    // --- APP LOGIC ---

    // 1. Data Sources
    const colleges = [
        { name: "RV College (RVCE)", cse: 54, aiml: 42, ec: 49 },
        { name: "MSRIT Bangalore", cse: 145, aiml: 245, ec: 103 },
        { name: "PES Univ (RR)", cse: 255, aiml: 449, ec: 621 },
        { name: "UVCE Bangalore", cse: 137, aiml: 133, ec: 212 },
        { name: "BMSCE Basavanagudi", cse: 450, aiml: 690, ec: 110 },
        { name: "Dr. Ambedkar (AIT)", cse: 688, aiml: 1578, ec: 1243 },
        { name: "Dayananda Sagar", cse: 852, aiml: 707, ec: 954 },
        { name: "Bangalore Inst. Tech", cse: 867, aiml: 951, ec: 1276 },
        { name: "BMS Inst. Tech", cse: 1708, aiml: 1945, ec: 1332 },
        { name: "Nitte Meenakshi", cse: 1649, aiml: 1389, ec: 2371 },
        { name: "Sir MVIT", cse: 2073, aiml: 2708, ec: 5264 },
        { name: "RNSIT", cse: 1824, aiml: 2390, ec: 2239 },
        { name: "JSSATE", cse: 3619, aiml: 4134, ec: 2383 },
        { name: "CMRIT", cse: 2974, aiml: 4194, ec: 3002 },
        { name: "New Horizon", cse: 2133, aiml: 3917, ec: 2561 },
        { name: "Vidya Vikas Mysore", cse: 4828, aiml: 6000, ec: 3514 }
    ];

    const ranges = [
        { min: 91.8, label: "1 - 10" }, { min: 90.6, label: "11 - 20" },
        { min: 89.98, label: "21 - 30" }, { min: 89.5, label: "31 - 40" },
        { min: 89.1, label: "41 - 50" }, { min: 89.0, label: "51 - 60" },
        { min: 88.3, label: "61 - 70" }, { min: 88.0, label: "71 - 80" },
        { min: 87.8, label: "81 - 90" }, { min: 87.6, label: "91 - 100" },
        { min: 86.9, label: "100 - 125" }, { min: 86.5, label: "126 - 150" },
        { min: 86.2, label: "151 - 175" }, { min: 85.5, label: "176 - 200" },
        { min: 84.6, label: "200 - 250" }, { min: 84.0, label: "250 - 300" },
        { min: 82.7, label: "300 - 400" }, { min: 81.5, label: "400 - 500" },
        { min: 79.6, label: "500 - 750" }, { min: 77.6, label: "750 - 1000" },
        { min: 75.6, label: "1000 - 1250" }, { min: 72.5, label: "1250 - 1750" },
        { min: 67.9, label: "1750 - 3000" }, { min: 0, label: "3000+" }
    ];

    // 2. Preloader
    window.onload = function() {
        setTimeout(() => {
            document.getElementById('preloader').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('preloader').style.display = 'none';
            }, 500);
        }, 1000);
    };

    // 3. Theme Toggle
    function toggleTheme() {
        const body = document.body;
        const icon = document.getElementById('theme-icon');
        if (body.getAttribute('data-theme') === 'light') {
            body.setAttribute('data-theme', 'dark');
            icon.classList.remove('fa-moon');
            icon.classList.add('fa-sun');
            showToast("Switched to Dark Mode ðŸŒ™");
        } else {
            body.setAttribute('data-theme', 'light');
            icon.classList.remove('fa-sun');
            icon.classList.add('fa-moon');
            showToast("Switched to Light Mode â˜€ï¸");
        }
    }

    // 4. Input Logic
    function syncInput(val) {
        document.getElementById('marks').value = val;
        document.getElementById('marks-val').innerText = val;
        if(document.getElementById('percent').value) predict();
    }
    function syncSlider(val) {
        document.getElementById('marks-slider').value = val;
        document.getElementById('marks-val').innerText = val;
    }

    function toPercent() {
        let v = parseFloat(document.getElementById('cgpa').value);
        if(!isNaN(v)) document.getElementById('percent').value = ((v * 10) - 7.5).toFixed(2);
    }
    function toCgpa() {
        let v = parseFloat(document.getElementById('percent').value);
        if(!isNaN(v)) document.getElementById('cgpa').value = ((v + 7.5) / 10).toFixed(2);
    }

    // 5. Prediction Logic
    function predict() {
        let p = parseFloat(document.getElementById('percent').value);
        let m = parseFloat(document.getElementById('marks').value);

        if(isNaN(p) || isNaN(m)) { showToast("Please enter values first!"); return; }

        let merit = (p / 2) + (m / 2);
        
        let rankLabel = "3000+";
        let maxRank = 5000;

        for(let r of ranges) {
            if(merit >= r.min) {
                rankLabel = r.label;
                let parts = r.label.split('-');
                maxRank = parseInt(parts.length > 1 ? parts[1] : parts[0]);
                break;
            }
        }

        if(maxRank <= 500) triggerConfetti();

        document.getElementById('rank-display').innerText = rankLabel;
        document.getElementById('score-display').innerText = merit.toFixed(2);
        document.getElementById('rank-card').style.display = 'block';
        
        renderColleges(maxRank);
        document.getElementById('college-section').style.display = 'block';
        
        // Scroll slightly
        window.scrollBy({ top: 300, behavior: 'smooth' });
    }

    function renderColleges(rank) {
        let cseH="", aimlH="", ecH="";
        colleges.forEach(clg => {
            cseH += getRow(clg.name, clg.cse, rank);
            aimlH += getRow(clg.name, clg.aiml, rank);
            ecH += getRow(clg.name, clg.ec, rank);
        });
        document.getElementById('cse-list').innerHTML = cseH || "<small>No safe colleges.</small>";
        document.getElementById('aiml-list').innerHTML = aimlH || "<small>No safe colleges.</small>";
        document.getElementById('ec-list').innerHTML = ecH || "<small>No safe colleges.</small>";
    }

    function getRow(name, cutoff, rank) {
        if (rank > cutoff + (cutoff * 0.15)) return ""; 
        let isSafe = rank <= cutoff;
        return `
            <div class="clg-item ${isSafe ? 'safe' : 'risk'}">
                <div>${name}</div>
                <div style="text-align:right">
                    <div style="font-size:0.75rem; opacity:0.7">Cutoff: ${cutoff}</div>
                    <div style="font-size:0.8rem; font-weight:700; color:${isSafe?'#00b894':'#fdcb6e'}">
                        ${isSafe ? 'Safe' : 'Borderline'}
                    </div>
                </div>
            </div>`;
    }

    // 6. Tools
    function showToast(msg) {
        var x = document.getElementById("toast");
        x.className = "show";
        x.innerText = msg;
        setTimeout(function(){ x.className = x.className.replace("show", ""); }, 3000);
    }

    function triggerConfetti() {
        confetti({ particleCount: 120, spread: 80, origin: { y: 0.6 } });
    }

    function downloadResult() {
        html2canvas(document.getElementById("capture-area")).then(canvas => {
            let link = document.createElement('a');
            link.download = 'DCET_Prediction_Adithya.png';
            link.href = canvas.toDataURL();
            link.click();
            showToast("Screenshot Saved! ðŸ“¸");
        });
    }

    function shareResult() {
        if (navigator.share) {
            navigator.share({
                title: 'My DCET Prediction',
                text: `I used Adithya's DCET Predictor! Check yours now.`,
                url: window.location.href
            }).then(() => showToast("Shared Successfully!"))
              .catch((error) => console.log('Error sharing', error));
        } else {
            showToast("Sharing not supported on this browser.");
        }
    }
</script>

</body>
</html>
